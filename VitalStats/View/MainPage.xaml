<phone:PhoneApplicationPage
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:views="clr-namespace:VitalStats.View"
    xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
	xmlns:ec="clr-namespace:Microsoft.Expression.Interactivity.Core;assembly=Microsoft.Expression.Interactions" 
	xmlns:eim="clr-namespace:Microsoft.Expression.Interactivity.Media;assembly=Microsoft.Expression.Interactions" 
    xmlns:System="clr-namespace:System;assembly=mscorlib" 
	xmlns:controls="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls"

	xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
    xmlns:ViewModel="clr-namespace:VitalStats.ViewModel"
    x:Class="VitalStats.View.MainPage"
    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
    SupportedOrientations="Portrait" Orientation="Portrait"
    shell:SystemTray.IsVisible="True"
	>

    <phone:PhoneApplicationPage.Resources>
    	
			
    	<!--ViewModel:AppViewModel x:Key="AppViewModelSampleData" d:IsDataSource="True"/-->
		
    	<views:WordsOnNewlines x:Key="WordsOnNewlines"/>
    	<views:BoolToVisibility x:Key="BoolToVisibility" />
		
		<Style x:Key="profileButtonStyle" TargetType="Button">
    		<Setter Property="Template">
    			<Setter.Value>
    				<ControlTemplate TargetType="Button">
    					<Canvas x:Name="profileCanvas" Background="{StaticResource PhoneAccentBrush}" Width="150" Height="150" Margin="0">
    						<Image x:Name="isProtectedImg" Height="60" Canvas.Left="96" Canvas.Top="97" Width="60" Source="/Images/Lock.png" Visibility="{Binding IsProtected, Converter={StaticResource BoolToVisibility}}"/>
    						<ContentPresenter Height="91" Canvas.Left="6" Canvas.Top="6" Width="144" Content="{Binding Name, Converter={StaticResource WordsOnNewlines}}"/>
    					</Canvas>
    				</ControlTemplate>
    			</Setter.Value>
    		</Setter>
    		<Setter Property="FontSize" Value="29.333"/>
	    </Style>
		<DataTemplate x:Key="MeasurementTypesItemTemplate">
			<StackPanel>
				<TextBlock Text="{Binding Id}"/>
				<CheckBox IsChecked="{Binding IsConvertible, Mode=TwoWay}"/>
				<TextBlock Text="{Binding Name}"/>
			</StackPanel>
		</DataTemplate>
		<DataTemplate x:Key="StatTemplatesItemTemplate">
			<StackPanel>
				<TextBlock Text="{Binding Id}"/>
				<TextBlock Text="{Binding Name}"/>
			</StackPanel>
		</DataTemplate>
		

    </phone:PhoneApplicationPage.Resources>
	
	<d:DataContext>
		<Binding Source="{StaticResource SampleDataSource}"/>
	</d:DataContext>
    
	<phone:PhoneApplicationPage.FontFamily>
		<StaticResource ResourceKey="PhoneFontFamilyNormal"/>
	</phone:PhoneApplicationPage.FontFamily>
	<phone:PhoneApplicationPage.FontSize>
		<StaticResource ResourceKey="PhoneFontSizeNormal"/>
	</phone:PhoneApplicationPage.FontSize>
	<phone:PhoneApplicationPage.Foreground>
		<StaticResource ResourceKey="PhoneForegroundBrush"/>
	</phone:PhoneApplicationPage.Foreground>
<!--Sample code showing usage of ApplicationBar-->
 
    
    
	<Grid x:Name="LayoutRoot">
		
		<VisualStateManager.CustomVisualStateManager>
			<ec:ExtendedVisualStateManager/>
		</VisualStateManager.CustomVisualStateManager>
		<VisualStateManager.VisualStateGroups>
			<VisualStateGroup x:Name="addProfilePopUpStateGroup">
				<VisualState x:Name="addProfilePopUpClosed"/>
				<VisualState x:Name="addProfilePopUpOpen"/>
			</VisualStateGroup>
		</VisualStateManager.VisualStateGroups>

		

		<controls:Pivot Title="VITAL STATISTICS">
            <!--Pivot item one-->
            <controls:PivotItem x:Name="profilesPivotItem" Header="profiles">


			<Grid x:Name="Layout" Background="Transparent">
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="*"/>
				</Grid.RowDefinitions>

				<!--TitlePanel contains the name of the application and page title-->

				<!--ContentPanel - place additional content here-->
				<Grid x:Name="ContentPanel" Grid.Row="1" Margin="24,0,12,0" >
					<ItemsControl x:Name="profileWrapPanel" ItemsSource="{Binding Profiles}" >
						<ItemsControl.ItemsPanel>
							<ItemsPanelTemplate>
								<toolkit:WrapPanel Orientation="Horizontal" />								
							</ItemsPanelTemplate>
						</ItemsControl.ItemsPanel>
    					<ItemsControl.ItemTemplate>
    						<DataTemplate>
    							<!--
								<Border>
    							<TextBlock Text="{Binding Name}" Width="200" />
								</Border>
    							-->
    							<Button Content="{Binding Name, Converter={StaticResource WordsOnNewlines}}" Height="150" Margin="0,0,10,10" Style="{StaticResource profileButtonStyle}" Width="150" Tap="Button_Tap">
									<toolkit:ContextMenuService.ContextMenu>
										<toolkit:ContextMenu>
											<toolkit:MenuItem Header="delete" Tag="{Binding Id}" Tap="deleteContextMenuItem_Tap"     />
											<toolkit:MenuItem Header="remove protection" Tag="{Binding Id}" />
										</toolkit:ContextMenu>
									</toolkit:ContextMenuService.ContextMenu>
									
    							</Button>
								
    						</DataTemplate>
						</ItemsControl.ItemTemplate>
					</ItemsControl>
				</Grid>
		
			</Grid>
		
		</controls:PivotItem>
	            
        <controls:PivotItem x:Name="howtoPivotItem" Header="howto">
			<Grid Margin="24,0,12,0" >
				<ListBox x:Name="howtoListBox" ItemsSource="{Binding StatTemplates}" Padding="0,0,12,0">
					<ListBox.ItemContainerStyle>
						<Style TargetType="ListBoxItem">
							<Setter Property="HorizontalContentAlignment" Value="Stretch" />
							
						</Style>
					</ListBox.ItemContainerStyle>
					<ListBox.ItemTemplate>
						<DataTemplate>
							<Border Margin="0,0,0,5" Background="{StaticResource PhoneAccentBrush}" >
								<TextBox x:Name="howtoBtn" Text="{Binding Name}" FontSize="{StaticResource PhoneFontSizeLarge}"  BorderThickness="0" Padding="0" Height="66" Width="420" Background="Transparent" BorderBrush="Transparent" Foreground="White" SelectionBackground="Transparent" SelectionForeground="White" Tap="howtoBtn_Tap" />
							</Border>
						</DataTemplate>
					</ListBox.ItemTemplate>
				</ListBox>
			</Grid>
		</controls:PivotItem>
    </controls:Pivot>
	
</Grid>

	
	<phone:PhoneApplicationPage.ApplicationBar>
		      	<shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
        	<shell:ApplicationBar.MenuItems>
        		<shell:ApplicationBarMenuItem x:Name="aboutAppBarMenuItem" Text="About"/>
        		<shell:ApplicationBarMenuItem x:Name="settingsAppBarMenuItem" Text="settings"/>
        	</shell:ApplicationBar.MenuItems>
        	<shell:ApplicationBarIconButton x:Name="addAppBarBtn" IconUri="/Images/add.png" Text="add profile" Click="addAppBarBtn_Click" IsEnabled="True"/>
      	</shell:ApplicationBar>
	</phone:PhoneApplicationPage.ApplicationBar>
	

</phone:PhoneApplicationPage>