<phone:PhoneApplicationPage
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:views="clr-namespace:VitalStats.View"
    xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
		xmlns:ec="clr-namespace:Microsoft.Expression.Interactivity.Core;assembly=Microsoft.Expression.Interactions" 
		xmlns:eim="clr-namespace:Microsoft.Expression.Interactivity.Media;assembly=Microsoft.Expression.Interactions" 
    xmlns:System="clr-namespace:System;assembly=mscorlib" 
		xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
    xmlns:ViewModel="clr-namespace:VitalStats.ViewModel"
    x:Class="VitalStats.View.MainPage"
    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
    SupportedOrientations="Portrait" Orientation="Portrait"
    shell:SystemTray.IsVisible="True"
	>

    <phone:PhoneApplicationPage.Resources>
    	
			
    	<!--<ViewModel:AppViewModel x:Key="AppViewModelSampleData" d:IsDataSource="True"/>-->
		
    	<views:WordsOnNewlines x:Key="WordsOnNewlines"/>
    	<views:BoolToVisibility x:Key="BoolToVisibility" />
		
			<Style x:Key="profileButtonStyle" TargetType="Button">
    		<Setter Property="Template">
    			<Setter.Value>
    				<ControlTemplate TargetType="Button">
    						<Canvas x:Name="profileCanvas" Background="{StaticResource PhoneAccentBrush}" Width="150" Height="150">
    						<Image x:Name="isProtectedImg" Height="60" Canvas.Left="96" Canvas.Top="97" Width="60" Source="/VitalStats;component/Images/Lock.png" Visibility="{Binding IsProtected, Converter={StaticResource BoolToVisibility}}"/>
    						<ContentPresenter Height="91" Canvas.Left="6" Canvas.Top="6" Width="144" Content="{Binding Name, Converter={StaticResource WordsOnNewlines}}"/>
    					</Canvas>
    				</ControlTemplate>
    			</Setter.Value>
    		</Setter>
    		<Setter Property="FontSize" Value="29.333"/>
	    </Style>

      	<shell:ApplicationBar x:Key="defaultAppBar" IsVisible="True" IsMenuEnabled="True">
        	<shell:ApplicationBar.MenuItems>
        		<shell:ApplicationBarMenuItem x:Name="aboutAppBarMenuItem" Text="About"/>
        		<shell:ApplicationBarMenuItem x:Name="settingsAppBarMenuItem" Text="settings"/>
        	</shell:ApplicationBar.MenuItems>
        	<shell:ApplicationBarIconButton x:Name="addAppBarBtn" IconUri="/icons/appbar.add.rest.png" Text="add profile" Click="addAppBarBtn_Click" IsEnabled="True"/>
      	</shell:ApplicationBar>

		<shell:ApplicationBar x:Key="addProfileAppBar" IsVisible="True">
			<shell:ApplicationBarIconButton x:Name="cancelAddBtn" Text="cancel" IconUri="/icons/appbar.close.png" Click="cancelAddBtn_Click" IsEnabled="True" />
		    <shell:ApplicationBarIconButton x:Name="confirmAddBtn" Text="add" IconUri="/icons/appbar.check.png" Click="confirmAddBtn_Click" IsEnabled="True" />
		</shell:ApplicationBar>

    </phone:PhoneApplicationPage.Resources>
	
	<d:DataContext>
		<Binding Source="{StaticResource SampleDataSource}"/>
	</d:DataContext>
    
	<phone:PhoneApplicationPage.FontFamily>
		<StaticResource ResourceKey="PhoneFontFamilyNormal"/>
	</phone:PhoneApplicationPage.FontFamily>
	<phone:PhoneApplicationPage.FontSize>
		<StaticResource ResourceKey="PhoneFontSizeNormal"/>
	</phone:PhoneApplicationPage.FontSize>
	<phone:PhoneApplicationPage.Foreground>
		<StaticResource ResourceKey="PhoneForegroundBrush"/>
	</phone:PhoneApplicationPage.Foreground>
<!--Sample code showing usage of ApplicationBar-->
 
    
    
	<Grid x:Name="LayoutRoot">
		<VisualStateManager.CustomVisualStateManager>
			<ec:ExtendedVisualStateManager/>
		</VisualStateManager.CustomVisualStateManager>
		<VisualStateManager.VisualStateGroups>
			<VisualStateGroup x:Name="addProfilePopUpStateGroup">
				<VisualState x:Name="addProfilePopUpClosed"/>
				<VisualState x:Name="addProfilePopUpOpen">
					<Storyboard>
						<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="addProfileGrid">
							<DiscreteObjectKeyFrame KeyTime="0">
								<DiscreteObjectKeyFrame.Value>
									<Visibility>Visible</Visibility>
								</DiscreteObjectKeyFrame.Value>
							</DiscreteObjectKeyFrame>
						</ObjectAnimationUsingKeyFrames>
					</Storyboard>
				</VisualState>
			</VisualStateGroup>
		</VisualStateManager.VisualStateGroups>

		<Grid x:Name="Layout" Background="Transparent">
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="*"/>
			</Grid.RowDefinitions>

			<!--TitlePanel contains the name of the application and page title-->
			<StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
				<TextBlock x:Name="ApplicationTitle" Text="VITAL STATISTICS" Style="{StaticResource PhoneTextNormalStyle}"/>
				<TextBlock x:Name="PageTitle" Text="profiles" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
			</StackPanel>

			<!--ContentPanel - place additional content here-->
			<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0" >
				<ListBox x:Name="profileListBox" ItemsSource="{Binding Profiles}">
					<ListBox.ItemTemplate>
    				<DataTemplate>
    					<Button Content="{Binding Name, Converter={StaticResource WordsOnNewlines}}" Height="150" Margin="12,0,0,25" Style="{StaticResource profileButtonStyle}" Width="150" Tap="Button_Tap">
								<toolkit:ContextMenuService.ContextMenu>
									<toolkit:ContextMenu>
										<toolkit:MenuItem Header="delete" Tag="{Binding Id}" Tap="deleteContextMenuItem_Tap"     />
										<toolkit:MenuItem Header="remove protection" Tag="{Binding Id}" />
									</toolkit:ContextMenu>
								</toolkit:ContextMenuService.ContextMenu>
    					</Button>
    				</DataTemplate>
					</ListBox.ItemTemplate>
				</ListBox>
			</Grid>
		</Grid>
		
		
			<Grid x:Name="addProfileGrid" Background="{StaticResource PhoneAccentBrush}" Visibility="Collapsed">
				<Grid.RowDefinitions>
					<RowDefinition Height="80*"></RowDefinition>
					<RowDefinition Height="20*"></RowDefinition>
				</Grid.RowDefinitions>
				<StackPanel Grid.Row="0" Orientation="Vertical">
					<TextBlock Margin="0,0,0,50" TextWrapping="Wrap" Text="add new profile" FontSize="{StaticResource PhoneFontSizeExtraExtraLarge}" Padding="10,0,0,0" />
					<TextBlock TextWrapping="Wrap" Text="Name" Padding="10,0,0,0" FontSize="{StaticResource PhoneFontSizeMedium}"/>
					<TextBox x:Name="nameTextBox" TextWrapping="Wrap"/>
					<CheckBox x:Name="isProtectedCheckBox" Content="protect with PIN"/>
				</StackPanel>
			</Grid>
		
	
	
	</Grid>

</phone:PhoneApplicationPage>